{
    "id": "https://mastra.ai/docs/agents/using-tools-and-mcp",
    "title": "Using Tools with Agents | Agents | Mastra Docs",
    "url": "https://mastra.ai/docs/agents/using-tools-and-mcp",
    "author": "",
    "text": "\n Tools are typed functions that can be executed by agents or workflows. Each tool has a schema defining its inputs, an executor function implementing its logic, and optional access to configured integrations. \n Creating Tools \n Here’s a basic example of creating a tool: \n src/mastra/tools/weatherInfo.ts import { createTool } from \" @mastra/core/tools \"; \n import { z } from \" zod \"; \n \n export const weatherInfo = createTool ({ \n id: \" Get Weather Information \", \n inputSchema: z. object ({ \n city: z. string (), \n }), \n description: ` Fetches the current weather information for a given city `, \n execute: async ({ context: { city } }) =&gt; { \n // Tool logic here (e.g., API call) \n console. log ( \" Using tool to fetch weather information for \", city); \n return { temperature: 20, conditions: \" Sunny \" }; // Example return \n }, \n}); \n For details on creating and designing tools, see the Tools Overview. \n Adding Tools to an Agent \n To make a tool available to an agent, add it to the tools property in the agent’s configuration. \n src/mastra/agents/weatherAgent.ts import { Agent } from \" @mastra/core/agent \"; \n import { openai } from \" @ai-sdk/openai \"; \n import { weatherInfo } from \"../tools/weatherInfo \"; \n \n export const weatherAgent = new Agent ({ \n name: \" Weather Agent \", \n instructions: \n \" You are a helpful assistant that provides current weather information. When asked about the weather, use the weather information tool to fetch the data. \", \n model: openai ( \" gpt-4o-mini \"), \n tools: { \n weatherInfo, \n }, \n}); \n When you call the agent, it can now decide to use the configured tool based on its instructions and the user’s prompt. \n Adding MCP Tools to an Agent \n Model Context Protocol (MCP)  provides a standardized way for AI models to discover and interact with external tools and resources. You can connect your Mastra agent to MCP servers to use tools provided by third parties. \n For more details on MCP concepts and how to set up MCP clients and servers, see the MCP Overview. \n Installation \n First, install the Mastra MCP package: \n npm install @mastra/mcp@latest \n Using MCP Tools \n Because there are so many MCP server registries to choose from, we’ve created an MCP Registry Registry  to help you find MCP servers. \n Once you have a server you want to use with your agent, import the Mastra MCPClient and add the server configuration. \n import { MCPClient } from \" @mastra/mcp \"; \n import { Agent } from \" @mastra/core/agent \"; \n import { openai } from \" @ai-sdk/openai \"; \n \n // Configure MCPClient to connect to your server(s) \n export const mcp = new MCPClient ({ \n servers: { \n filesystem: { \n command: \" npx \", \n args: [ \n \" -y \", \n \" @modelcontextprotocol/server-filesystem \", \n \" /Users/username/Downloads \", \n ], \n }, \n }, \n}); \n Then connect your agent to the server tools: \n src/mastra/agents/mcpAgent.ts import { mcp } from \"../mcp \"; \n // Create an agent and add tools from the MCP client \n const agent = new Agent ({ \n name: \" Agent with MCP Tools \", \n instructions: \" You can use tools from connected MCP servers. \", \n model: openai ( \" gpt-4o-mini \"), \n tools: await mcp. getTools (), \n}); \n For more details on configuring MCPClient and the difference between static and dynamic MCP server configurations, see the MCP Overview.",
    "image": "https://mastra.ai/api/og/docs?title=Using%20Tools%20with%20Agents%20|%20Agents%20|%20Mastra%20Docs&description=Learn%20how%20to%20create%20tools,%20add%20them%20to%20Mastra%20agents,%20and%20integrate%20tools%20from%20MCP%20servers.",
    "favicon": "https://mastra.ai/favicon.ico",
    "extras": {
        "links": [
            "https://mastra.ai/en/docs/agents/using-tools-and-mcp",
            "https://mastra.ai/",
            "https://mastra.ai/docs",
            "https://mastra.ai/examples"
        ]
    }
}